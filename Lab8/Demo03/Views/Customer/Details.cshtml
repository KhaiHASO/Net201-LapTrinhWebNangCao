@model Demo03.Models.Customer

@{
    ViewData["Title"] = "Lazy Loading Demo";
}

<div class="container mt-4">
    <div class="alert alert-warning border-start border-warning border-4" role="alert">
        <h4 class="alert-heading"><i class="bi bi-lightning-charge-fill"></i> Lazy Loading Demo</h4>
        <p>
            Dữ liệu <strong>Orders</strong> được load tự động (Lazy) ngay tại dòng vòng lặp creating <code>foreach</code> trong View này.
            <br />
            Nếu bạn check log console, bạn sẽ thấy 1 câu lệnh SQL Query bảng Order được sinh ra <strong>SAU</strong> khi View này bắt đầu render.
        </p>
    </div>

    <div class="card shadow">
        <div class="card-header bg-primary text-white">
            <h3 class="mb-0">Customer Info</h3>
        </div>
        <div class="card-body">
            <dl class="row">
                <dt class="col-sm-3">Customer ID</dt>
                <dd class="col-sm-9">@Model.CustomerId</dd>

                <dt class="col-sm-3">Customer Name</dt>
                <dd class="col-sm-9 fw-bold">@Model.CustomerName</dd>
            </dl>
        </div>
    </div>

    <h4 class="mt-4 mb-3 text-secondary">List of Orders (Loaded via Lazy Loading)</h4>
    
    @if(Model.Orders.Any())
    {
        <table class="table table-striped table-hover border">
            <thead class="table-dark">
                <tr>
                    <th>Order ID</th>
                    <th>Order Name</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var order in Model.Orders) // <--- LAZY LOADING TRIGGERED HERE
                {
                    <tr>
                        <td>@order.OrderId</td>
                        <td>@order.OrderName</td>
                    </tr>
                }
            </tbody>
        </table>
    }
    else
    {
        <p class="text-muted">No orders found.</p>
    }

    <a asp-action="Index" class="btn btn-secondary mt-3">Back to List</a>
</div>
